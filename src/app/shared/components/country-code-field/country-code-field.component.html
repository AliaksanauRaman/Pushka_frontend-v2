<div class="pu-field-outer">
  <button
    #menuTrigger="cdkMenuTriggerFor"
    class="pu-field"
    [class.pu-field--active]="menuTrigger.isOpen()"
    [cdkMenuTriggerFor]="countryCodeList"
    [attr.aria-label]="_ariaLabelDirective.ariaLabel()"
    puDisabled
    [disabled]="_isDisabled()"
    type="button"
    (cdkMenuClosed)="touchField()"
  >
    <ng-container *ngIf="_viewValue() as value; else placeholder">
      {{ value }}
    </ng-container>

    <ng-template #placeholder>
      <span class="placeholder">{{ _placeholderDirective.placeholder() }}</span>
    </ng-template>
  </button>

  <img
    class="caret-icon"
    [class.caret-icon--rotated]="menuTrigger.isOpen()"
    ngSrc="/assets/icons/gray-caret-down.svg"
    alt="Caret"
    width="24"
    height="24"
  />
</div>

<ng-template #countryCodeList>
  <div class="country-code-list-panel" cdkMenu>
    <button
      class="country-code-list-item"
      [class.country-code-list-item--selected]="
        _value()?.value === countryCode.value
      "
      *ngFor="let countryCode of _countryCodes; trackBy: trackByCountryCode"
      cdkMenuItem
      (cdkMenuItemTriggered)="handleCountryCodeSelect(countryCode)"
    >
      <span
        >{{ countryCode.value }} ({{
          countryCode.countryLabel | translate
        }})</span
      >
    </button>
  </div>
</ng-template>
